<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Form</title>
    <link rel="stylesheet" href="./kvJSONForm.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css"
        integrity="sha512-q3eWabyZPc1XTCmF+8/LuE1ozpg5xxn7iO89yfSOd5/oKvyqLngoNGsx8jq92Y8eXJ/IRxQbEC+FGSYxtk2oiw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="./kvJSONForm.js"></script>

    <script>
        async function setup() {
            kvJSONForm();
            let timeOffset = (new Date()).getTimezoneOffset() * 60000;
            document.querySelectorAll('[Type="datetime-local"]').forEach(el =>
                el.value = (new Date((el.value ? new Date(el.value) : new Date()) - timeOffset)).toISOString().substring(0, 16)
            );
        }
        function complete(tr) {
            console.log("changed!");
        }
    </script>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
        }
    </style>
</head>

<body onload="setup()">
    <!--kv-jsonform name="dati" value='{"text":"","number":"","color":"#000000","email":"","checkbox":[],"radio":"c","datetime-local":"","date":"","select":"red","multiple":"medium,large","aree":"504,507"}'>
        <label><span>text</span> <input form="json" name="text" required></label>
        <label><span>number</span> <input form="json" type="number" name="number" required></label>
        <label><span>color</span> <input form="json" type="color" name="color" required></label>
        <label><span>email</span> <input form="json" type="email" name="email" required></label>
        <fieldset><span>checkbox</span>
            <input form="json" type="checkbox" name="checkbox" value="a">
            <input form="json" type="checkbox" name="checkbox" value="a">
            <input form="json" type="checkbox" name="checkbox" value="a">
        </fieldset>
        <fieldset><span>radio</span>
            <input form="json" type="radio" name="radio" value="a">
            <input form="json" type="radio" name="radio" value="b">
            <input form="json" type="radio" name="radio" value="c">
        </fieldset>
        <label><span>datetime-local</span> <input form="json" type="datetime-local" name="datetime-local"
                required></label>
        <label><span>date</span> <input form="json" type="date" name="date" required></label>
        <label><span>select</span> <select form="json" name="*select">
                <option value="red">Red</option>
                <option value="green">Green</option>
                <option value="blu">Blu</option>
            </select></label>
        <label><span>multiple</span> <select form="json" name="*multiple" multiple>
                <option value="small">Small</option>
                <option value="medium">Medium</option>
                <option value="large">Large</option>
            </select></label>

        <label><span>Area</span><input type="hidden" name="aree" value="28/05/2025 15:55:15"><select form="json"
                name="*aree" multiple="multiple"
                size="4">
                <option value="504">Sicurezza</option>
                <option value="505">Ambiente - Sistemi di Gestione</option>
                <option value="506">Prevenzione incendi</option>
                <option value="507">Altro</option>
            </select></label>
    </kv-jsonform-->

    <form>
        <textarea name="dati" data-json="json"
            style="display:block; height: 10rem;">{"text":"","number":"","color":"#000000","email":"","checkbox":[],"radio":"c","datetime-local":"","date":"","select":"red","multiple":"medium,large","aree":"504,507"}</textarea>

        <label><span>text</span> <input form="json" name="text"></label>
        <label><span>number</span> <input form="json" type="number" name="number"></label>
        <label><span>color</span> <input form="json" type="color" name="color" required></label>
        <label><span>email</span> <input form="json" type="email" name="email"></label>
        <fieldset><span>checkbox</span>
            <input form="json" type="checkbox" name="checkbox" value="a">
            <input form="json" type="checkbox" name="checkbox" value="a">
            <input form="json" type="checkbox" name="checkbox" value="a">
        </fieldset>
        <fieldset><span>radio</span>
            <input form="json" type="radio" name="radio" value="a">
            <input form="json" type="radio" name="radio" value="b">
            <input form="json" type="radio" name="radio" value="c">
        </fieldset>
        <label><span>datetime-local</span> <input form="json" type="datetime-local" name="datetime-local"
                required></label>
        <label><span>date</span> <input form="json" type="date" name="date" required></label>
        <label><span>select</span> <select form="json" name="*select">
                <option value="red">Red</option>
                <option value="green">Green</option>
                <option value="blu">Blu</option>
            </select></label>
        <label><span>multiple</span> <select form="json" name="*multiple" multiple>
                <option value="small">Small</option>
                <option value="medium">Medium</option>
                <option value="large">Large</option>
            </select></label>

        <label><span>Area</span><input type="hidden" name="aree" value="28/05/2025 15:55:15"><select form="json"
                name="*aree" multiple="multiple" size="4">
                <option value="504">Sicurezza</option>
                <option value="505">Ambiente - Sistemi di Gestione</option>
                <option value="506">Prevenzione incendi</option>
                <option value="507">Altro</option>
            </select></label>
        <input form="json" name="readonly" readonly>

        <button type="submit" onclick="foo(event)">Salva</button>
    </form>
    <!--
    <input x-webkit-speech><br>
    <textarea x-webkit-speech></textarea>
    -->
</body>
<script>
    function foo(event) {
        let el = event.target.form.querySelector("[name=readonly]");
        el.value = 'cucu';
    }
</script>

</html>